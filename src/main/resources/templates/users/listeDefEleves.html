<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org" 
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="users/userslayout">
<head>
<meta charset="UTF-8"/>
<title>Listes définitives</title>
</head>
<body>
<div layout:fragment="formactionusers">
<!-- DEBUT DU FORMULAIRE PERMETTANT D'EFFECTUER L'ACTION DEMANDEE -->
<div class="col-md-12    reculeverticalementmodifdonneepersoform">
	<div class="panel panel-primary">
		<div class="panel-heading">
			<h4>Affichage des listes provisoires des différentes classes</h4>
		</div>
		<div class="panel-body">
			<p class="alert alert-warning">
				<span style="text-decoration: underline;">IMPORTANT:</span> Sélectionner la classe, le critere de sélection
				 et cliquer sur Afficher. Une fois
				la liste affichée cliquer Exporter pour l'imprimer dans un fichier pdf qui peut être par la suite transporté ou imprimé. 
			</p>
			
			<form action="#" th:action="@{/logesco/users/getlisteDefEleves}" method="get"  th:if="${listofClasses}">
				<fieldset class="col-md-2"  th:if="${listofClasses}">
					<legend class="text-primary">Choisir la classe</legend>
					<div class="form-group">
						<label for="idClasseSelect"> Classe : <span
										class="redcolor">*</span></label> 
						<select class="form-control" name="idClasseSelect" id="idClasseSelect" >
										 
							<!-- <option th:each="c:${listofClasses}" th:value="${c.idClasses}"
									th:inline="text">
									 [[${c.codeClasses}]] [[${c.specialite.codeSpecialite}]] [[${c.numeroClasses}]]</option> -->
									 
							<optgroup th:label="${n.codeNiveaux}" th:if="${listofNiveaux}" th:each="n:${listofNiveaux}">
											
								<option th:each="c:${n.listofClasses}" th:value="${c.idClasses}"
										th:inline="text">
										 [[${c.codeClasses}]] [[${c.specialite.codeSpecialite}]] [[${c.numeroClasses}]]
								</option>
												
							</optgroup>
										 
						</select>
						<hr/>
						<label for="critere"> Critère de sélection (en %) : </label>
						
						<select class="form-control" name="critere" id="critere" >
							<optgroup label="Pourcentage versé">
								<option value="100">100</option>
								<option value="75">75</option>
								<option value="50">50</option>
								<option value="25">25</option>
							</optgroup>
						</select>
						<hr/>
						<button type="submit" class="btn btn-primary  pull-right">Envoyer</button>
					</div>
					
				</fieldset>
					
				<fieldset  class="col-md-10" th:if="${classeSelect}">
					<legend class="text-primary" >Liste des élèves de la 
					<span th:inline="text" th:if="${classeSelect}" class="greencolor"> [[${classeSelect.codeClasses}]] 
					[[${classeSelect.specialite.codeSpecialite}]] [[${classeSelect.numeroClasses}]]</span> (Total provisoire:
						<span th:text="${effectifprovClasse}" class="redcolor"></span> Total Définitif:
						<span th:text="${effectifdefClasse}" class="redcolor"></span>)
					</legend>
					
					<div th:if="${listdefofEleves}" >
						<table class="table table-striped">
							<thead class="thead-light">
								<tr>
									<th scope="col">MATRICULE</th>
									<th scope="col">NOMS ET PRENOMS</th>
									<th scope="col">DATE ET LIEU DE NAISSANCE</th>
									<th scope="col">N° TEL PARENT/TUTEUR</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="eleve:${listdefofEleves}">
									<td th:inline="text">[[${eleve.matriculeEleves}]] </td>
								
									<td th:inline="text">[[${#strings.capitalize(eleve.nomsEleves)}]] [[${eleve.prenomsEleves}]] </td>
									
									<td th:inline="text">Né le [[${eleve.datenaissEleves}]] à [[${eleve.lieunaissEleves}]]</td>
									
									<td th:inline="text">[[${eleve.numtel1Parent}]]</td>
								</tr>
							</tbody>
						</table>
						
						<div class="container">
							<ul class="pagination"><!-- nav nav-pills -->
								<li th:each="p,status:${listdefofPagesEleves}" th:class="${status.index==pagedefCouranteEleves}?active:' ' ">
									<a th:href="@{/logesco/users/getlisteProvEleves(idClasseSelect=${idClasseSelect},
											numPagedefEleves=${status.index})}"
											 th:text="${status.index+1}"></a>
								</li>
							</ul>
							
						</div> 
						
					</div>
					
				</fieldset>
				
				<a class="btn btn-primary btn-sm pull-right" href="#" th:if="${classeSelect}"
			      						th:href="@{/logesco/users/exportlistdefEleves(idClasseSelect=${idClasseSelect},
			      						critere=${critere})}" 
			      						 role="button" target="_blank">Exporter la liste en PDF</a>
				
			</form>
			
		</div>
	</div>
</div>
<!-- FIN DU FORMULAIRE PERMETTANT D'EFFECTUER L'ACTION DEMANDEE -->
</div>
</body>
</html>